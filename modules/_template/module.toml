# ─── saba-chan Module Template ─────────────────────────────
# 이 파일을 복사하여 새 모듈의 module.toml로 사용하세요.
# 필수 필드에 [필수]를 표시하였습니다.

[module]
name = "your_game"                        # [필수] 영문 식별자 (소문자, 하이픈/언더스코어 가능)
version = "1.0.0"                         # [필수] 모듈 버전 (semver)
description = "Your Game server module"   # [필수] 모듈 설명
game_name = "Your Game"                   # 게임 이름
display_name = "Your Game"                # [필수] GUI 표시 이름
entry = "lifecycle.py"                    # [필수] Python 진입점 파일
icon = "icon.png"                         # 모듈 아이콘 (PNG, 선택)
log_pattern = '(?P<level>INFO|WARN|ERROR|DEBUG|FATAL)'  # 로그 레벨 정규식 (선택)

# ─── 프로토콜 설정 ────────────────────────────────────────
[protocols]
supported = ["stdin"]                     # 지원 프로토콜: "rcon", "rest", "stdin"
default = "stdin"                         # 기본 프로토콜
interaction_mode = "console"              # "console" (stdin 지원) 또는 "commands" (정해진 명령어만)

# ─── 서버 실행 설정 ──────────────────────────────────────
[config]
executable_path = ""                      # 서버 실행 파일 경로
process_name = ""                         # 프로세스 이름 (예: "java.exe", "PalServer.exe")
default_port = 25565                      # 기본 게임 포트

# ─── 서버 탐지 설정 (자동 감지용, 선택) ──────────────────
[detection]
process_patterns = []                     # 프로세스 이름 패턴 (예: ["java.exe"])
common_paths = []                         # 서버가 설치될 수 있는 일반적인 경로
dir_signatures = []                       # 디렉토리 내 파일 존재 여부로 식별 (AND 조건, 예: ["server.exe", "config.ini"])

# ─── GUI 설정 필드 정의 (선택) ───────────────────────────
# 인스턴스 설정 화면에서 표시할 필드들을 정의합니다.
[settings]

[[settings.fields]]
name = "executable_path"
type = "file"
label = "Server Executable Path"
description = "Path to the server executable or JAR file"
required = true

[[settings.fields]]
name = "port"
type = "number"
label = "Game Port"
description = "The port the game server listens on"
default = "25565"

# ─── 명령어 정의 (commands interaction_mode 일 때 사용, 선택) ──
# REST/RCON을 통해 실행할 수 있는 명령어를 정의합니다.
# [commands]
# [[commands.fields]]
# name = "players"
# label = "Player List"
# description = "Show online players"
# method = "rcon"                         # "rcon", "rest", "stdin"
# rcon_template = "list"                  # RCON 명령어 템플릿
# [[commands.fields.inputs]]             # 사용자 입력 필드 (선택)
# name = "filter"
# label = "Filter"
# type = "string"
# required = false

# ─── 콘솔 구문 하이라이팅 (선택) ──────────────────────────
# 콘솔 출력에 적용할 하이라이팅 규칙입니다. interaction_mode = "console" 인 모듈에서 사용합니다.
# pattern: 정규식 — (?P<hl>...) 캡처 그룹이 있으면 해당 부분만 색상 적용, 없으면 전체 매치
# color: CSS 색상값(예: "#f38ba8") 또는 시맨틱 토큰명 — 사용 가능한 토큰:
#   error, warn, info, debug, success, string, number, keyword, comment,
#   timestamp, player, command, ip, uuid, path, dim
# bold: 굵게 표시 (기본 false)
# italic: 기울임 표시 (기본 false)
#
# [syntax_highlight]
#
# [[syntax_highlight.rules]]
# name = "timestamp"                      # 규칙 이름 (디버그용)
# pattern = '^\\[\\d{2}:\\d{2}:\\d{2}\\]' # 매칭 정규식
# color = "timestamp"                     # 색상
# bold = false                            # 굵게 (선택)
# italic = false                          # 기울임 (선택)
