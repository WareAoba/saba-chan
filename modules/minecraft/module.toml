[module]
name = "minecraft"
version = "2.0.0"
description = "Minecraft server management module with full lifecycle control"
game_name = "Minecraft"
display_name = "Minecraft"
entry = "lifecycle.py"
icon = "icon.png"

[protocols]
supported = ["rcon", "stdin"]
default = "rcon"
interaction_mode = "console"  # console: stdin 지원, 콘솔 UI 표시 | commands: 정해진 명령어만 실행

[config]
executable_path = ""
java_path = "java"
server_jar = "server.jar"
eula = true
process_name = "java.exe"
default_port = 25565
rcon_port = 25575
ram = "2G"

[detection]
process_patterns = ["java.exe", "minecraft_server"]
common_paths = [
    "C:\\Users\\*\\Desktop\\MinecraftServer",
    "C:\\MinecraftServer",
    "C:\\Games\\Minecraft\\server",
    "D:\\MinecraftServer"
]

# ─── Settings (displayed in GUI for instance configuration) ───

[settings]

[[settings.fields]]
name = "executable_path"
type = "file"
label = "Server JAR Path"
description = "Path to server.jar file"
required = true

[[settings.fields]]
name = "java_path"
type = "file"
label = "Java Path"
description = "Path to Java executable (auto-detected if left blank)"
required = false
default = "java"

[[settings.fields]]
name = "ram"
type = "text"
label = "Memory (RAM)"
description = "Maximum memory allocation (e.g. 2G, 4G, 8G)"
default = "2G"

[[settings.fields]]
name = "port"
type = "number"
label = "Server Port"
description = "Game server port"
default = 25565
min = 1024
max = 65535

[[settings.fields]]
name = "difficulty"
type = "select"
label = "Difficulty"
description = "Game difficulty"
options = ["peaceful", "easy", "normal", "hard"]
default = "normal"

[[settings.fields]]
name = "gamemode"
type = "select"
label = "Game Mode"
description = "Default game mode"
options = ["survival", "creative", "adventure", "spectator"]
default = "survival"

[[settings.fields]]
name = "max_players"
type = "number"
label = "Max Players"
description = "Maximum number of players"
default = 20
min = 1
max = 1000

[[settings.fields]]
name = "motd"
type = "text"
label = "MOTD"
description = "Message displayed in the server list"
default = "A Minecraft Server"

[[settings.fields]]
name = "online_mode"
type = "boolean"
label = "Online Mode"
description = "Require Mojang authentication (disable for cracked clients)"
default = true

[[settings.fields]]
name = "pvp"
type = "boolean"
label = "PVP"
description = "Allow player vs player combat"
default = true

[[settings.fields]]
name = "view_distance"
type = "number"
label = "View Distance"
description = "Maximum view distance in chunks"
default = 10
min = 2
max = 32

[[settings.fields]]
name = "simulation_distance"
type = "number"
label = "Simulation Distance"
description = "Maximum simulation distance in chunks"
default = 10
min = 2
max = 32

[[settings.fields]]
name = "spawn_protection"
type = "number"
label = "Spawn Protection"
description = "Radius of spawn protection (0 to disable)"
default = 16
min = 0
max = 256

[[settings.fields]]
name = "allow_flight"
type = "boolean"
label = "Allow Flight"
description = "Allow flying in survival mode"
default = false

[[settings.fields]]
name = "allow_nether"
type = "boolean"
label = "Allow Nether"
description = "Allow players to travel to the Nether"
default = true

[[settings.fields]]
name = "enable_command_block"
type = "boolean"
label = "Command Blocks"
description = "Enable command blocks"
default = false

[[settings.fields]]
name = "hardcore"
type = "boolean"
label = "Hardcore"
description = "Enable hardcore mode"
default = false

[[settings.fields]]
name = "white_list"
type = "boolean"
label = "Whitelist"
description = "Only allow whitelisted players"
default = false

[[settings.fields]]
name = "level_name"
type = "text"
label = "World Name"
description = "Name of the world folder"
default = "world"

[[settings.fields]]
name = "level_seed"
type = "text"
label = "World Seed"
description = "Seed for world generation (leave empty for random)"
default = ""

[[settings.fields]]
name = "level_type"
type = "select"
label = "World Type"
description = "Type of world generation"
options = ["minecraft:normal", "minecraft:flat", "minecraft:large_biomes", "minecraft:amplified", "minecraft:single_biome_surface"]
default = "minecraft:normal"

[[settings.fields]]
name = "max_world_size"
type = "number"
label = "Max World Size"
description = "Maximum world border radius"
default = 29999984
min = 1
max = 29999984

[[settings.fields]]
name = "use_aikar_flags"
type = "boolean"
label = "Aikar's Flags"
description = "Use recommended JVM flags for better GC performance"
default = false

# ─── Commands (displayed in GUI command palette) ──────────────

[commands]

[[commands.fields]]
name = "say"
label = "Send Chat Message"
description = "Broadcast a message to the server"
method = "rcon"
command_template = "say {message}"
inputs = [
    { name = "message", type = "text", label = "Message", required = true, placeholder = "Enter message to send" }
]

[[commands.fields]]
name = "give"
label = "Give Item"
description = "Give an item to a player"
method = "rcon"
command_template = "give {player} {item} {amount}"
inputs = [
    { name = "player", type = "text", label = "Player Name", required = true, placeholder = "Player nickname" },
    { name = "item", type = "text", label = "Item ID", required = true, placeholder = "e.g. diamond, iron_ore" },
    { name = "amount", type = "number", label = "Amount", required = true, default = 1, min = 1, max = 64 }
]

[[commands.fields]]
name = "save-all"
label = "Save World"
description = "Save the game world"
method = "rcon"
command_template = "save-all"
inputs = []

[[commands.fields]]
name = "list"
label = "Player List"
description = "View list of connected players"
method = "rcon"
command_template = "list"
inputs = []

[[commands.fields]]
name = "weather"
label = "Change Weather"
description = "Change the server weather"
method = "rcon"
command_template = "weather {type} {duration}"
inputs = [
    { name = "type", type = "select", label = "Weather", required = true, options = ["clear", "rain", "thunder"] },
    { name = "duration", type = "number", label = "Duration (seconds)", required = true, default = 1000, min = 1, max = 1000000 }
]

[[commands.fields]]
name = "difficulty"
label = "Change Difficulty"
description = "Change the game difficulty"
method = "rcon"
command_template = "difficulty {level}"
inputs = [
    { name = "level", type = "select", label = "Difficulty", required = true, options = ["peaceful", "easy", "normal", "hard"] }
]

[[commands.fields]]
name = "gamemode"
label = "Change Game Mode"
description = "Change a player's game mode"
method = "rcon"
command_template = "gamemode {mode} {player}"
inputs = [
    { name = "mode", type = "select", label = "Game Mode", required = true, options = ["survival", "creative", "adventure", "spectator"] },
    { name = "player", type = "text", label = "Player Name", required = false, placeholder = "Leave empty for all" }
]

[[commands.fields]]
name = "time"
label = "Set Time"
description = "Change the time of day"
method = "rcon"
command_template = "time set {value}"
inputs = [
    { name = "value", type = "select", label = "Time", required = true, options = ["day", "noon", "night", "midnight", "0", "6000", "12000", "18000"] }
]

[[commands.fields]]
name = "tp"
label = "Teleport"
description = "Teleport a player"
method = "rcon"
command_template = "tp {player} {target}"
inputs = [
    { name = "player", type = "text", label = "Player", required = true, placeholder = "Player to teleport" },
    { name = "target", type = "text", label = "Destination", required = true, placeholder = "Target player or coordinates (x y z)" }
]

[[commands.fields]]
name = "kick"
label = "Kick Player"
description = "Kick a player from the server"
method = "rcon"
command_template = "kick {player} {reason}"
inputs = [
    { name = "player", type = "text", label = "Player Name", required = true },
    { name = "reason", type = "text", label = "Reason", required = false, placeholder = "Reason for kick" }
]

[[commands.fields]]
name = "ban"
label = "Ban Player"
description = "Ban a player from the server"
method = "rcon"
command_template = "ban {player} {reason}"
inputs = [
    { name = "player", type = "text", label = "Player Name", required = true },
    { name = "reason", type = "text", label = "Reason", required = false, placeholder = "Reason for ban" }
]

[[commands.fields]]
name = "pardon"
label = "Unban Player"
description = "Remove a player's ban"
method = "rcon"
command_template = "pardon {player}"
inputs = [
    { name = "player", type = "text", label = "Player Name", required = true }
]

[[commands.fields]]
name = "op"
label = "Op Player"
description = "Give operator permissions"
method = "rcon"
command_template = "op {player}"
inputs = [
    { name = "player", type = "text", label = "Player Name", required = true }
]

[[commands.fields]]
name = "deop"
label = "Deop Player"
description = "Remove operator permissions"
method = "rcon"
command_template = "deop {player}"
inputs = [
    { name = "player", type = "text", label = "Player Name", required = true }
]

[[commands.fields]]
name = "whitelist"
label = "Whitelist"
description = "Manage the server whitelist"
method = "rcon"
command_template = "whitelist {action} {player}"
inputs = [
    { name = "action", type = "select", label = "Action", required = true, options = ["add", "remove", "list", "on", "off", "reload"] },
    { name = "player", type = "text", label = "Player Name", required = false, placeholder = "Player name (for add/remove)" }
]

[[commands.fields]]
name = "seed"
label = "Show Seed"
description = "Display the world seed"
method = "rcon"
command_template = "seed"
inputs = []

[[commands.fields]]
name = "stop"
label = "Stop Server"
description = "Gracefully stop the server"
method = "rcon"
command_template = "stop"
inputs = []

# ─── Error definitions ────────────────────────────────────────

[errors]
server_not_running = "Server is not running. Please start the server first"
auth_failed = "RCON authentication failed: please check the password"
connection_refused = "Cannot connect to server. Please check RCON port and settings"
timeout = "Server response timeout. Please check server status"
rcon_disabled = "RCON is disabled. Set enable-rcon=true in server.properties"
internal_server_error = "Internal server error occurred"

# ─── Aliases ──────────────────────────────────────────────────

[aliases]
module_aliases = ["마인크래프트", "마크", "mc", "minecraft"]

[aliases.commands]
start = { aliases = ["시작", "실행", "켜기"], description = "Start the server" }
stop = { aliases = ["정지", "끝내기", "끄기"], description = "Stop the server" }
status = { aliases = ["상태", "상황", "확인"], description = "Check server status" }
say = { aliases = ["말", "채팅", "메시지"], description = "Broadcast a message" }
give = { aliases = ["지급", "줘", "item"], description = "Give an item to a player" }
save-all = { aliases = ["저장"], description = "Save the world" }
list = { aliases = ["목록", "플레이어", "유저"], description = "View connected players" }
weather = { aliases = ["날씨", "웨더"], description = "Change the weather" }
difficulty = { aliases = ["난이도", "어려움"], description = "Change game difficulty" }
gamemode = { aliases = ["겜모드", "게임모드"], description = "Change game mode" }
time = { aliases = ["시간"], description = "Set time of day" }
tp = { aliases = ["텔레포트", "이동"], description = "Teleport a player" }
kick = { aliases = ["킥", "추방"], description = "Kick a player" }
ban = { aliases = ["밴", "차단"], description = "Ban a player" }
pardon = { aliases = ["언밴", "해제"], description = "Unban a player" }
op = { aliases = ["오피"], description = "Give operator permissions" }
deop = { aliases = ["디옵"], description = "Remove operator permissions" }
whitelist = { aliases = ["화이트리스트", "화리"], description = "Manage whitelist" }
