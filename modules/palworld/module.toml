[module]
name = "palworld"
version = "1.0.0"
description = "Palworld server management module"
game_name = "Palworld"
display_name = "Palworld"
entry = "lifecycle.py"
icon = "icon.png"

[protocols]
supported = ["rest", "rcon"]
default = "rest"
interaction_mode = "commands"  # console: stdin 지원, 콘솔 UI 표시 | commands: 정해진 명령어만 실행

[config]
executable_path = "C:\\Program Files (x86)\\Steam\\steamapps\\common\\PalServer\\PalServer.exe"
server_executable = "PalServer.exe"
process_name = "PalServer-Win64-Shipping-Cmd"
port = 8211

[detection]
process_patterns = ["PalServer-Win64-Shipping-Cmd", "PalServer", "PalServer-Win64"]
common_paths = [
    "C:\\Program Files (x86)\\Steam\\steamapps\\common\\PalServer",
    "D:\\SteamLibrary\\steamapps\\common\\PalServer",
    "C:\\Games\\Palworld\\server"
]

[settings]

[[settings.fields]]
name = "executable_path"
type = "file"
label = "Server Executable Path"
description = "Path to the server executable"
required = true

[[settings.fields]]
name = "port"
type = "number"
label = "Server Port"
description = "Game server port"
default = 8211
min = 1024
max = 65535

[[settings.fields]]
name = "rcon_port"
type = "number"
label = "RCON Port"
description = "RCON port"
default = 25575
min = 1024
max = 65535

[[settings.fields]]
name = "rcon_password"
type = "password"
label = "RCON Password"
description = "Remote command execution password"
required = false

[[settings.fields]]
name = "rest_host"
type = "text"
label = "REST API Host"
description = "REST API host (default 127.0.0.1)"
default = "127.0.0.1"

[[settings.fields]]
name = "rest_port"
type = "number"
label = "REST API Port"
description = "REST API port (default 8212)"
default = 8212
min = 1
max = 65535

[[settings.fields]]
name = "rest_username"
type = "text"
label = "REST Username"
description = "REST Basic Auth username"
required = false

[[settings.fields]]
name = "rest_password"
type = "password"
label = "REST Password"
description = "REST Basic Auth password"
required = false

[commands]

[[commands.fields]]
name = "announce"
label = "Send Announcement"
description = "Broadcast a message to the server"
method = "dual"
http_method = "POST"
endpoint_template = "/v1/api/announce"
rcon_template = "Broadcast {message}"
inputs = [
    { name = "message", type = "text", label = "Announcement Message", required = true, placeholder = "Enter announcement message" }
]

[[commands.fields]]
name = "info"
label = "Server Info"
description = "View server information"
method = "dual"
http_method = "GET"
endpoint_template = "/v1/api/info"
rcon_template = "Info"
inputs = []

[[commands.fields]]
name = "players"
label = "Player List"
description = "List currently connected players"
method = "dual"
http_method = "GET"
endpoint_template = "/v1/api/players"
rcon_template = "ShowPlayers"
inputs = []

[[commands.fields]]
name = "save"
label = "Save World"
description = "Save the game world"
method = "dual"
http_method = "POST"
endpoint_template = "/v1/api/save"
rcon_template = "Save"
inputs = []

[[commands.fields]]
name = "shutdown"
label = "Shutdown Server"
description = "Shutdown the server (with optional delay)"
method = "dual"
http_method = "POST"
endpoint_template = "/v1/api/shutdown"
rcon_template = "Shutdown {waittime} {message}"
inputs = [
    { name = "waittime", type = "number", label = "Shutdown Delay (seconds)", required = true, default = 30, min = 0, max = 600 },
    { name = "message", type = "text", label = "Shutdown Message", required = false, placeholder = "Server shutdown announcement" }
]

[[commands.fields]]
name = "kick"
label = "Kick Player"
description = "Kick a player from the server"
method = "dual"
http_method = "POST"
endpoint_template = "/v1/api/kick"
rcon_template = "KickPlayer {userid}"
inputs = [
    { name = "userid", type = "text", label = "Player (Nickname or SteamID)", required = true, placeholder = "Player nickname or steam_xxxxxxxxx" },
    { name = "message", type = "text", label = "Kick Message", required = false, placeholder = "Optional: kick message" }
]

[[commands.fields]]
name = "ban"
label = "Ban Player"
description = "Permanently ban a player"
method = "dual"
http_method = "POST"
endpoint_template = "/v1/api/ban"
rcon_template = "BanPlayer {userid}"
inputs = [
    { name = "userid", type = "text", label = "Player (Nickname or SteamID)", required = true, placeholder = "Player nickname or steam_xxxxxxxxx" },
    { name = "message", type = "text", label = "Ban Message", required = false, placeholder = "Optional: ban message" }
]

[[commands.fields]]
name = "unban"
label = "Unban Player"
description = "Unban a banned player"
method = "dual"
http_method = "POST"
endpoint_template = "/v1/api/unban"
rcon_template = "UnBanPlayer {userid}"
inputs = [
    { name = "userid", type = "text", label = "Player (Nickname or SteamID)", required = true, placeholder = "Player nickname or steam_xxxxxxxxx" }
]

[errors]
server_not_running = "Server is not running. Please start the server first"
auth_failed = "Authentication failed: please check REST API username/password or RCON password"
player_not_found = "Player not found. Please check the nickname or SteamID"
connection_refused = "Cannot connect to server. Please check server port and REST API settings"
timeout = "Server response timeout. Please check server status"
rest_api_disabled = "REST API is disabled. Please enable REST API in server settings"
rcon_disabled = "RCON is disabled. Please enable RCON in server settings"
internal_server_error = "Internal server error occurred"

[aliases]
module_aliases = ["팰월드", "팔월드", "pw", "palworld"]

[aliases.commands]
start = { aliases = ["시작", "실행", "켜기"], description = "Start the server" }
stop = { aliases = ["정지", "끝내기", "끄기"], description = "Stop the server" }
status = { aliases = ["상태", "상황", "확인"], description = "Check server status" }
announce = { aliases = ["공지", "공지사항", "알림"], description = "Send a broadcast announcement" }
save = { aliases = ["저장"], description = "Save the game world" }
info = { aliases = ["정보", "인포"], description = "View server information" }
players = { aliases = ["플레이어", "접속자", "유저"], description = "List connected players" }
shutdown = { aliases = ["종료", "셧다운"], description = "Shutdown the server" }
kick = { aliases = ["킥", "강퇴", "추방"], description = "Kick a player" }
ban = { aliases = ["밴", "차단", "영구밴"], description = "Ban a player" }
unban = { aliases = ["언밴", "차단해제"], description = "Unban a player" }
